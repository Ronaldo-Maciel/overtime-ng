<div class="container">
  <div class="clearfix">
    <h2 class="m-2 text-center float-left">Time to go!</h2>
    <button type="button" class="mt-3 float-right btn btn-secondary btn-sm" (click)="toggleSettings($event)" [ngClass]="{'active':showSettings}">Configurações <i class="fa fa-cog"></i></button>
  </div>
  <div class="card">
    <div class="card-header bg-warning" id="sat_holiday" hidden>
      <i class="fa fa-exclamation-triangle"></i> <strong class="has-warning form-control-warning">Feriado no próximo Sábado!</strong>
    </div>

    <form class="card-block bg-faded pb-0" #clockForm="ngForm" (submit)="saveArrivedTime()">
      <div class="form-group row no-gutters" *ngIf="showSettings" [ngClass]="{'has-danger':workTimeCheck.invalid}">
        <label class="col-5 col-form-label">Carga horária diária:</label>
        <div class="col-5 d-flex">
          <input class="form-control" type="text" mask="00:00" required appTimeValidator="HH:mm" [(ngModel)]="settings.workTime" name="settings.workTime" #workTimeCheck="ngModel" style="width: 6rem;" />
          <button type="button" class="btn btn-link btn-sm" (click)="saveSettings()" [disabled]="workTimeCheck.invalid"><i class="fa fa-floppy-o"></i></button>
        </div>
      </div>
      <div class="form-group row no-gutters" *ngIf="showSettings" [ngClass]="{'has-danger':toleranceCheck.invalid}">
        <label class="col-5 col-form-label">Tolerância:</label>
        <div class="col-3 d-flex">
          <input class="form-control" type="text" mask="00" required appTimeValidator="mm" [(ngModel)]="settings.toleranceTime" name="settings.toleranceTime" #toleranceCheck="ngModel" style="width: 6rem;" />
          <button type="button" class="btn btn-link btn-sm" (click)="saveSettings()" [disabled]="toleranceCheck.invalid"><i class="fa fa-floppy-o"></i></button>
        </div>
      </div>
      <div class="form-group row no-gutters" *ngIf="showSettings">
        <label class="form-check-label">
          <input class="form-check-input" type="checkbox" [(ngModel)]="settings.checkSaturdayHoliday" name="settings.checkSaturdayHoliday" (ngModelChange)="saveSettings()">
          Verificar feriados aos sábados?
        </label>
      </div>
      <div class="form-group row no-gutters" [ngClass]="{'has-danger':arrivedTimeCheck.invalid}">
        <div class="col d-flex">
          <label class="col-form-label mr-2">Entrada: </label>
          <input class="form-control mr-2" type="text" mask="00:00" [(ngModel)]="arrivedTime" name="arrivedTime" (keyup.enter)="saveArrivedTime()" #arrivedTimeCheck="ngModel" required appTimeValidator="HH:mm" style="width: 9rem;" />
          <button type="submit" class="btn btn-primary mr-2" [disabled]="clockForm.invalid">Calcular</button>
          <button type="button" class="btn btn-danger" *ngIf="showSettings" (click)="resetSettings()">Limpar</button>
        </div>

      </div>
    </form>

    <div class="card-block">
      <div class="alert alert-info" id="min_time_container">
        <div class="clearfix">
          <div class="float-left">Mínimo:</div>
          <div class="float-right font-weight-bold" id="min_time">{{minimumClockOut}}</div>
        </div>
      </div>
      <div class="alert alert-success">
        <div class="clearfix">
          <div class="float-left">Normal:</div>
          <div class="float-right font-weight-bold" id="regular_time">{{normalClockOut}}</div>
        </div>
      </div>
      <div class="alert alert-warning" id="max_time_container">
        <div class="clearfix">
          <div class="float-left">Máximo:</div>
          <div class="float-right font-weight-bold" id="max_time">{{maximumClockOut}}</div>
        </div>
      </div>
      <div class="alert alert-danger mb-0">
        <div class="clearfix">
          <div class="float-left">Máximo de Extra:</div>
          <div class="float-right font-weight-bold" id="max_extra_time">{{maximumExtraTime}}</div>
        </div>
      </div>
    </div>

  </div>

  <div class="row mt-3 mb-3">
    <div class="col">
      <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated bg-info p-4" role="progressbar" style="width: 55%;"></div>
        <span class="my-progress-text text-center w-100 p-3">4h11min para o mínimo</span>
      </div>
    </div>
  </div>
  <p>Powered by <i>@walbinjr - </i><a href="http://wbjr.me" target="_blank"><i>wbjr.me</i></a></p>
</div>
